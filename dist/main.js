(()=>{"use strict";class s{constructor(s){this.size=s,this.board=this.createBoard(s),this.shots=[],this.hits=[],this.ships=[]}createBoard(s=this.size){let t=[];for(let i=0;i<s;i++){t[i]=[];for(let e=0;e<s;e++)t[i][e]=e}return t}placeShip(s,t,i,e){let h=[];if("battleship"==s)if("vertical"==e){if(i>6)return void alert("Please select a valid space!");h.push([t,i],[t,i+1],[t,i+2],[t,i+3])}else if("horizontal"==e){if(t>6)return void alert("Please select a valid space!");h.push([t,i],[t+1,i],[t+2,i],[t+3,i])}if("carrier"==s)if("vertical"==e){if(i>5)return void alert("Please select a valid space!");h.push([t,i],[t,i+1],[t,i+2],[t,i+3],[t,i+4])}else if("horizontal"==e){if(t>5)return void alert("Please select a valid space!");h.push([t,i],[t+1,i],[t+2,i],[t+3,i],[t+4,i])}if("cruiser"==s)if("vertical"==e){if(i>8)return void alert("Please select a valid space!");h.push([t,i],[t,i+1])}else if("horizontal"==e){if(t>8)return void alert("Please select a valid space!");h.push([t,i],[t+1,i])}if("destroyer"==s)if("vertical"==e){if(i>7)return void alert("Please select a valid space!");h.push([t,i],[t,i+1],[t,i+2])}else if("horizontal"==e){if(t>7)return void alert("Please select a valid space!");h.push([t,i],[t+1,i],[t+2,i])}if("submarine"==s)if("vertical"==e){if(i>7)return void alert("Please select a valid space!");h.push([t,i],[t,i+1],[t,i+2])}else if("horizontal"==e){if(i>7)return void alert("Please select a valid space!");h.push([t,i],[t+1,i],[t+2,i])}return h}receiveAttack(s,t){let i=[s,t];this.shots.push(i);for(let e=0;e<this.ships.length;e++)for(let h=0;h<this.ships[e].location.length;h++)if(s==this.ships[e].location[h][0]&&t==this.ships[e].location[h][1])return this.hits.push(i),this.ships[e].hit(i),[s,t];return console.log("Miss!"),!1}}class t{constructor(s,t){this.name=s,this.size=t,this.location=[],this.hits=[],this.sunk=!1}hit(s){console.log("Hit!"),this.hits.push(s),this.isSunk()}isSunk(){this.hits.length==this.size&&(this.sunk=!0,console.log(`You sunk my ${this.name}!`))}}class i{constructor(t,i){this.isHuman=t,this.turn=i,this.myBoard=new s(10),this.myShips=[],this.shots=[],this.myHits=[],this.shotSearch=[]}place(s,i,e,h,o){let a=new t(s,i);a.location=this.myBoard.placeShip(s,e,h,o),this.myBoard.ships.push(a),this.myShips.push(a)}shoot(s,t,i){let e=[s,t];for(let i=0;i<this.shots.length;i++)if(s==this.shots[i][0]&&t==this.shots[i][1])return void alert("You cannot target the same spot twice!");this.shots.push(e);const h=i.myBoard.receiveAttack(s,t);0!=h&&this.myHits.push(h)}aiPlace(s,i){let e=new t(s,i),h=Math.round(Math.random());e.location=h>0?this.myBoard.placeShip(s,Math.floor(Math.random()*(this.myBoard.size-i)),Math.floor(Math.random()*this.myBoard.size),"horizontal"):this.myBoard.placeShip(s,Math.floor(Math.random()*this.myBoard.size),Math.floor(Math.random()*(this.myBoard.size-i)),"vertical"),this.myBoard.ships.push(e),this.myShips.push(e)}aiShoot(s){if(0!=this.shotSearch.length){let t=this.shotSearch[0][0],i=this.shotSearch[0][1];for(let s=0;s<this.shots.length;s++)if(t==this.shots[s][0]&&i==this.shots[s][1])return;let e=s.myBoard.receiveAttack(t,i);this.shots.push([t,i]),0!=e?(this.myHits.push(e),this.shotSearch=[],this.aiDestroy()):this.shotSearch.shift()}else{let t=Math.floor(Math.random()*s.myBoard.size),i=Math.floor(Math.random()*s.myBoard.size);for(let s=0;s<this.shots.length;s++)if(t==this.shots[s][0]&&i==this.shots[s][1])return;let e=s.myBoard.receiveAttack(t,i);this.shots.push([t,i]),0!=e&&(this.myHits.push(e),this.aiDestroy())}}aiDestroy(){if(1==this.myHits.length){const s=this.myHits[0][0],t=this.myHits[0][1];t<9&&this.shotSearch.push([s,t+1]),t>0&&this.shotSearch.push([s,t-1]),s>0&&this.shotSearch.push([s-1,t]),s<9&&this.shotSearch.push([s+1,t])}else{const s=this.myHits[0][0],t=this.myHits[0][1],i=this.myHits[this.myHits.length-1][0],e=this.myHits[this.myHits.length-1][1];s==i?this.shotSearch.push([s,t-1],[i,e+1]):t==e&&this.shotSearch.push([s-1,t],[i+1,e])}}}const e=new i(!0,!0);e.place("cruiser",2,5,5,"vertical"),e.place("battleship",4,0,0,"horizontal"),e.place("carrier",5,9,0,"vertical"),e.place("destroyer",3,3,2,"vertical"),e.place("submarine",3,0,7,"vertical"),console.log(e.myShips),console.log(e.myBoard);const h=new i(!1,!1);h.aiPlace("carrier",5),console.log(h.myShips),console.log(h.myBoard),console.log(h.shots),console.log(h.myHits),console.log(h.shotSearch),h.aiShoot(e),h.aiShoot(e),h.aiShoot(e),h.aiShoot(e),h.aiShoot(e)})();