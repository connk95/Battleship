(()=>{"use strict";class t{constructor(t){this.size=t,this.board=this.createBoard(t),this.shots=[],this.hits=[],this.ships=[]}createBoard(t=this.size){let s=[];for(let e=0;e<t;e++){s[e]=[];for(let i=0;i<t;i++)s[e][i]=i}return s}placeShip(t,s,e,i){let h=[];if("battleship"==t)if("vertical"==i){if(e>6)return void alert("Please select a valid space!");h.push([s,e],[s,e+1],[s,e+2],[s,e+3])}else if("horizontal"==i){if(s>6)return void alert("Please select a valid space!");h.push([s,e],[s+1,e],[s+2,e],[s+3,e])}if("carrier"==t)if("vertical"==i){if(e>5)return void alert("Please select a valid space!");h.push([s,e],[s,e+1],[s,e+2],[s,e+3],[s,e+4])}else if("horizontal"==i){if(s>5)return void alert("Please select a valid space!");h.push([s,e],[s+1,e],[s+2,e],[s+3,e],[s+4,e])}if("cruiser"==t)if("vertical"==i){if(e>8)return void alert("Please select a valid space!");h.push([s,e],[s,e+1])}else if("horizontal"==i){if(s>8)return void alert("Please select a valid space!");h.push([s,e],[s+1,e])}if("destroyer"==t)if("vertical"==i){if(e>7)return void alert("Please select a valid space!");h.push([s,e],[s,e+1],[s,e+2])}else if("horizontal"==i){if(s>7)return void alert("Please select a valid space!");h.push([s,e],[s+1,e],[s+2,e])}if("submarine"==t)if("vertical"==i){if(e>7)return void alert("Please select a valid space!");h.push([s,e],[s,e+1],[s,e+2])}else if("horizontal"==i){if(e>7)return void alert("Please select a valid space!");h.push([s,e],[s+1,e],[s+2,e])}return h}receiveAttack(t,s){let e=[t,s];this.shots.push(e);for(let i=0;i<this.ships.length;i++)for(let h=0;h<this.ships[i].location.length;h++)if(t==this.ships[i].location[h][0]&&s==this.ships[i].location[h][1])return this.hits.push(e),this.ships[i].hit(e),[t,s];return console.log("Miss!"),!1}}class s{constructor(t,s){this.name=t,this.size=s,this.location=[],this.hits=[],this.sunk=!1}hit(t){console.log("Hit!"),this.hits.push(t),this.isSunk()}isSunk(){this.hits.length==this.size&&(this.sunk=!0,console.log(`You sunk my ${this.name}!`))}}document.getElementById("content");const e=document.getElementById("myGrid"),i=(document.getElementById("aiGrid"),new class{constructor(s,e){this.isHuman=s,this.turn=e,this.myBoard=new t(10),this.myShips=[],this.shots=[],this.myHits=[],this.shotSearch=[]}place(t,e,i,h,a){for(let t=0;t<this.myShips.length;t++)for(let s=0;s<this.myShips[t].location.length;s++){let e=this.myShips[t].location[s][0],a=this.myShips[t].location[s][1];if(e==i&&a==h)return void alert("There is already a ship here!")}let o=new s(t,e);o.location=this.myBoard.placeShip(t,i,h,a),this.myBoard.ships.push(o),this.myShips.push(o)}shoot(t,s,e){let i=[t,s];for(let e=0;e<this.shots.length;e++)if(t==this.shots[e][0]&&s==this.shots[e][1])return void alert("You cannot target the same spot twice!");this.shots.push(i);const h=e.myBoard.receiveAttack(t,s);0!=h&&this.myHits.push(h)}aiPlace(t,e){let i=Math.floor(Math.random()*(this.myBoard.size-e)),h=Math.floor(Math.random()*this.myBoard.size),a=Math.floor(Math.random()*this.myBoard.size),o=Math.floor(Math.random()*(this.myBoard.size-e));for(let t=0;t<this.myShips.length;t++)for(let s=0;s<this.myShips[t].location.length;s++){let e=this.myShips[t].location[s][0],r=this.myShips[t].location[s][1];if(e==a&&r==o||e==i&&r==h)return}let r=new s(t,e),l=Math.round(Math.random());r.location=l>0?this.myBoard.placeShip(t,i,h,"horizontal"):this.myBoard.placeShip(t,a,o,"vertical"),this.myBoard.ships.push(r),this.myShips.push(r)}aiShoot(t){if(0!=this.shotSearch.length){let s=this.shotSearch[0][0],e=this.shotSearch[0][1];for(let t=0;t<this.shots.length;t++)if(s==this.shots[t][0]&&e==this.shots[t][1])return;let i=t.myBoard.receiveAttack(s,e);this.shots.push([s,e]),0!=i?(this.myHits.push(i),this.shotSearch=[],this.aiDestroy()):this.shotSearch.shift()}else{let s=Math.floor(Math.random()*t.myBoard.size),e=Math.floor(Math.random()*t.myBoard.size);for(let t=0;t<this.shots.length;t++)if(s==this.shots[t][0]&&e==this.shots[t][1])return;let i=t.myBoard.receiveAttack(s,e);this.shots.push([s,e]),0!=i&&(this.myHits.push(i),this.aiDestroy())}}aiDestroy(){if(1==this.myHits.length){const t=this.myHits[0][0],s=this.myHits[0][1];s<9&&this.shotSearch.push([t,s+1]),s>0&&this.shotSearch.push([t,s-1]),t>0&&this.shotSearch.push([t-1,s]),t<9&&this.shotSearch.push([t+1,s])}else{const t=this.myHits[0][0],s=this.myHits[0][1],e=this.myHits[this.myHits.length-1][0],i=this.myHits[this.myHits.length-1][1];t==e?this.shotSearch.push([t,s-1],[e,i+1]):s==i&&this.shotSearch.push([t-1,s],[e+1,i])}}}(!0,!0)),h=document.getElementById("direction");let a="vertical";h.addEventListener("click",(()=>{"vertical"==a?a="horizontal":"horizontal"==a&&(a="vertical")})),((t,s)=>{let e=0;for(let t=0;t<10;t++){let h=document.createElement("div");h.id=t,s.appendChild(h);for(let t=0;t<10;t++){let t=document.createElement("div");t.id=e<10?`0${e}`:e,e++,t.classList.add("tile"),t.addEventListener("mouseover",(()=>{t.classList.add("hover")})),t.addEventListener("click",(()=>{const s=String(t.id)[0],e=Number(s),h=String(t.id).slice(-1),o=Number(h);0==i.myShips.length?i.place("carrier",5,e,o,a):1==i.myShips.length?i.place("battleship",4,e,o,a):2==i.myShips.length?i.place("destroyer",3,e,o,a):3==i.myShips.length?i.place("submarine",3,e,o,a):4==i.myShips.length?i.place("cruiser",2,e,o,a):alert("You have no ships remaining!"),console.log(i.myShips),console.log(i.myBoard)})),h.appendChild(t)}}})(0,e)})();